:root{
      --bg:#f6f7fb; --card:#fff; --muted:#64748b; --accent:#0ea5e9; --danger:#ff4d4f;
      --shadow:0 6px 20px rgba(2,6,23,0.06); --radius:12px;
      --selected-border:2px solid #0ea5e9;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:#0f172a}
    header{background:#fff;border-bottom:1px solid #e6eef6;padding:12px 16px;display:flex;align-items:center;gap:12px;position:sticky;top:0;z-index:20;box-shadow:0 2px 6px rgba(0,0,0,0.03)}

/* Top tabs: always two-row grid (no horizontal scroll) */
#topTabs{display:grid;grid-template-columns:repeat(4, minmax(70px, 1fr));gap:8px;align-items:stretch;margin-left:0 !important;}
#topTabs .tab-btn{flex:0 0 auto;white-space:nowrap;}

@media (max-width:600px){
  /* Header: avoid overlapping hitboxes on mobile */
  header{flex-wrap:wrap;gap:10px;}
  header .left{width:100%;display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
  #topTabs .tab-btn{padding:7px 8px;font-size:12px;border-radius:12px;}
  header > div:last-child{width:100% !important;justify-content:flex-end;margin-left:0 !important;}
}
    .left{display:flex;align-items:center;gap:8px}
    .btn{background:var(--card);border:1px solid #e6eef6;padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer}
    .btn:hover{background:#f0f5ff}
    .btn-primary{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:10px;font-weight:800;cursor:pointer}
    .btn-primary:hover{background:#0284c7}
    .btn-danger{background:var(--danger);color:#fff;border:none;padding:6px 10px;border-radius:10px;cursor:pointer}
    .btn-success{background:#22c55e;color:#fff;border:none;padding:6px 10px;border-radius:10px;cursor:pointer}
    .btn:disabled,.btn-danger:disabled,.btn-primary:disabled{opacity:.5;cursor:not-allowed}

    .session-btns{display:flex;flex-direction:column;gap:6px}
    .container{padding:20px;max-width:1200px;margin:0 auto}
    .rooms{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin:18px 0}
    .room-btn{background:var(--card);padding:18px;border-radius:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border:1px solid #e6eef6;box-shadow:var(--shadow);transition:transform .12s}
    .room-btn:hover{transform:translateY(-4px)}
    .room-btn span{font-weight:800;margin-top:8px}
    .card{background:var(--card);padding:18px;border-radius:var(--radius);border:1px solid #e6eef6;box-shadow:var(--shadow);margin-bottom:18px}
    label{display:block;font-size:12px;color:var(--muted);font-weight:800;margin-bottom:6px}
    input[type=number], input[type=text], select, textarea{padding:10px;border:1px solid #e6eef6;border-radius:8px;width:100%;font-weight:700}
    input:focus, select:focus, textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 4px rgba(14,165,233,0.08)}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .flex{display:flex;gap:10px;align-items:center}
    .cabinet{border:1px solid #eef6fb;border-radius:12px;padding:0;background:#fff;margin-bottom:12px;box-shadow:0 6px 18px rgba(2,6,23,0.03);transition:box-shadow .12s, transform .12s}
    .cabinet:hover{transform:translateY(-2px)}
    .cabinet.selected{box-shadow:0 10px 30px rgba(14,165,233,0.12); border: var(--selected-border); }
    .cabinet-header{padding:14px;display:flex;justify-content:space-between;align-items:center;cursor:pointer}
    .cabinet-body{padding:14px;border-top:1px solid #eef6fb}
    .muted{color:var(--muted);font-weight:800;font-size:12px}
    .xs{font-size:12px}
    .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.55);display:none;align-items:center;justify-content:center;z-index:999;}
    .modal{width:100%;max-width:1100px;background:var(--card);border-radius:12px;overflow:hidden;box-shadow:0 18px 60px rgba(2,6,23,0.2)}
    .modal .header{display:flex;align-items:center;justify-content:space-between;padding:14px;border-bottom:1px solid #eef6fb;background:#f8fbff}
    .modal .body{padding:18px;max-height:72vh;overflow:auto}
/* Mobile: make modals fit viewport */
@media (max-width:600px){
  .modal-back{
    align-items:stretch;
    justify-content:stretch;
    padding:0;
  }
  .modal{
    max-width:100vw;
    width:100vw;
    height:100vh;
    border-radius:0;
  }
  .modal .header{
    position:sticky;
    top:0;
    z-index:2;
    padding:12px;
    flex-wrap:wrap;
    gap:10px;
  }
  .modal .body{
    max-height:none;
    height:calc(100vh - 64px);
    padding:12px;
    -webkit-overflow-scrolling:touch;
  }
  .modal .header > div:last-child{
    width:100%;
    justify-content:flex-end;
  }
}
    .list-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px solid #f1f5f9}
    .muted-tag{font-size:12px;color:#94a3b8}
    .floating-add{position:fixed;right:18px;bottom:18px;width:64px;height:64px;border-radius:50%;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-size:30px;box-shadow:0 10px 30px rgba(2,6,23,0.2);cursor:pointer;z-index:500}
    .build-card{padding:28px;text-align:center;border:1px dashed #e6eef6;border-radius:12px;background:#fff;box-shadow:0 6px 18px rgba(2,6,23,0.03)}
    .top-actions{display:flex;gap:8px;align-items:center}
    @media (max-width:900px){.rooms{grid-template-columns:repeat(2,1fr)}}

    /* Cabinet modal extras */
    .choice-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    @media (max-width:900px){.choice-grid{grid-template-columns:repeat(2,1fr)}}
    .choice-tile{
      border:1px solid #e6eef6;border-radius:14px;background:#fff;box-shadow:0 6px 18px rgba(2,6,23,0.03);
      padding:14px;cursor:pointer;transition:transform .12s, box-shadow .12s, border-color .12s;
      display:flex;gap:12px;align-items:center;min-height:74px;
    }
    .choice-tile:hover{transform:translateY(-2px);box-shadow:0 10px 26px rgba(2,6,23,0.06)}
    .choice-tile.selected{border-color:var(--accent);box-shadow:0 10px 30px rgba(14,165,233,0.14)}
    .choice-ico{width:40px;height:40px;border-radius:12px;background:#eaf6ff;display:flex;align-items:center;justify-content:center;font-size:22px}
    .choice-title{font-weight:900}
    .choice-sub{font-size:12px;color:var(--muted);font-weight:800;margin-top:2px}
    .section-title{font-weight:900;margin:0 0 10px 0}
    .hr{height:1px;background:#eef6fb;margin:14px 0}

    .mini-tiles{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media (max-width:900px){.mini-tiles{grid-template-columns:repeat(1,1fr)}}
    .mini-tile{
      border:1px solid #e6eef6;border-radius:14px;background:#fff;box-shadow:0 6px 18px rgba(2,6,23,0.03);
      padding:14px;cursor:pointer;transition:transform .12s, box-shadow .12s, border-color .12s;
    }
    .mini-tile:hover{transform:translateY(-2px)}
    .mini-tile.selected{border-color:var(--accent);box-shadow:0 10px 30px rgba(14,165,233,0.14)}
    .mini-head{display:flex;gap:10px;align-items:center}
    .mini-svg{width:56px;height:40px}
    .mini-title{font-weight:900}
    .mini-desc{font-size:12px;color:var(--muted);font-weight:800;margin-top:6px;line-height:1.35}
    .cab-actions{display:flex;gap:8px;align-items:center}

    /* Read-only rows */
    .ro-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media (max-width:900px){.ro-grid{grid-template-columns:repeat(2,1fr)}}
    .ro-box{border:1px solid #eef6fb;border-radius:10px;padding:10px;background:#fbfdff}
    .ro-val{font-weight:900}

    .badge{
      display:inline-flex;align-items:center;gap:6px;
      padding:4px 8px;border-radius:999px;
      background:#eaf6ff;border:1px solid rgba(14,165,233,0.35);
      font-size:12px;font-weight:900;color:#0369a1;
      margin-left:8px;
    }

    .front-block{
      margin:-6px 0 12px 0;
      border:1px solid #eef6fb;
      border-radius:12px;
      overflow:hidden;
      background:#fbfdff;
    }
    .front-block .head{
      display:flex;justify-content:space-between;align-items:center;
      padding:10px 12px;
      border-bottom:1px solid #eef6fb;
      background:#f3f9ff;
      font-weight:900;
    }
    .front-row{
      display:flex;justify-content:space-between;align-items:center;
      padding:10px 12px;
      border-bottom:1px solid #eef6fb;
    }
    .front-row:last-child{border-bottom:none}
    .front-meta{font-size:12px;color:#64748b;font-weight:800}
  

.warn-orange{
  display:none;
  padding:8px 10px;
  border-radius:10px;
  background:#ffedd5;
  border:1px solid #fb923c;
  color:#9a3412;
  font-weight:900;
}

/* quick focus highlight for jump buttons */
.focus-flash{
  animation: focusFlash 1.2s ease-out 1;
  outline: 3px solid #2aa9ff;
  outline-offset: 2px;
}
@keyframes focusFlash{
  0%{ outline-color: rgba(42,169,255,0.0); box-shadow: 0 0 0 rgba(0,0,0,0); }
  20%{ outline-color: rgba(42,169,255,0.95); box-shadow: 0 0 0 6px rgba(42,169,255,0.15); }
  100%{ outline-color: rgba(42,169,255,0.0); box-shadow: 0 0 0 rgba(0,0,0,0); }
}



.assy-wrap{margin-top:14px;border:1px solid #eef6fb;border-radius:12px;overflow:hidden;background:#fbfdff}
.assy-head{padding:10px 12px;border-bottom:1px solid #eef6fb;background:#f3f9ff;font-weight:900;display:flex;justify-content:space-between;align-items:center;gap:10px}
.assy-body{padding:12px}
.assy-note{margin-top:10px;line-height:1.45}
.assy-note div{margin:2px 0}



    /* Prevent background scroll when modal open (mobile fixes) */
    html.modal-lock, body.modal-lock{overflow:hidden;height:100%;}
    .modal-back{touch-action:none;overscroll-behavior:contain;}
    .modal{touch-action:auto;}

    /* Mobile safety: when opening a modal under the same tap, prevent accidental instant <select> open */
    .modal-open-guard, .modal-open-guard *{ pointer-events:none !important; }



/* ===== RYSUNEK (import) ===== */
.drawing-wrap{ display:flex; flex-direction:column; gap:12px; }
    .drawing-toolbar{
      display:flex; flex-wrap:wrap; gap:8px; align-items:center;
      padding:10px 12px; border:1px solid #eef6fb; border-radius:12px; background:#fbfdff;
    }
    .drawing-toolbar .group{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .drawing-toolbar .pill{
      padding:6px 10px; border-radius:999px; border:1px solid #e5eef7;
      background:#fff; font-size:12px; font-weight:800;
    }
    .drawing-stage{
      border:1px solid #eef6fb; border-radius:14px; background:#fff;
      padding:10px; overflow:auto;
    }
    .drawing-stage svg{ display:block; }
    .svg-cab{ fill:#eaf4ff; stroke:#1e4b8f; stroke-width:1; cursor:pointer; }
    .svg-gap{ fill:#ffffff; stroke:#94a3b8; stroke-width:1; stroke-dasharray:4 4; cursor:pointer; }
    .svg-cab.selected{ fill:#d9f2ff; stroke:#0ea5e9; stroke-width:2; }
    .svg-range{ fill:rgba(14,165,233,0.14); stroke:#0ea5e9; stroke-width:2; }
    .svg-label{ font-size:14px; fill:#0f172a; pointer-events:none; font-weight:800; }
    .svg-finish{ fill:rgba(2,132,199,0.15); stroke:#0284c7; stroke-width:2; pointer-events:none; }
    .svg-finish-strong{ fill:rgba(16,185,129,0.16); stroke:#10b981; stroke-width:2; pointer-events:none; }
    .ctxmenu{
      position:absolute; z-index:50; min-width:260px;
      background:#fff; border:1px solid #e5eef7; border-radius:14px;
      box-shadow:0 10px 30px rgba(2,6,23,0.10);
      padding:10px;
    }
    .ctxmenu h4{ margin:0 0 8px 0; font-size:13px; }
    .ctxmenu .actions{ display:flex; flex-direction:column; gap:6px; }
    .ctxmenu .actions button{ width:100%; text-align:left; }
    .finish-list{ display:flex; flex-direction:column; gap:8px; }
    .finish-item{
      display:flex; justify-content:space-between; gap:10px; align-items:flex-start;
      padding:10px 12px; border:1px solid #eef6fb; border-radius:12px; background:#fbfdff;
    }
    .finish-item .meta{ font-size:12px; }
    .finish-item .meta b{ display:block; margin-bottom:2px; }
    .finish-item .meta .muted{ margin:0; }


/* Home */
.home-hero{max-width:640px;margin:24px auto;}
.home-actions{display:grid;grid-template-columns:1fr;gap:10px;}
.home-btn{padding:14px 14px;border-radius:14px;font-weight:900;font-size:16px;}
@media (min-width:720px){
  .home-actions{grid-template-columns:repeat(3,1fr);}
}

.tab-btn{width:100%;}
